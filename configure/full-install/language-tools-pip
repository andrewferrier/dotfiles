#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail

DISTRIBUTION=$(uname -s)

if [[ -f /etc/debian_version ]]; then
    # All other packages installed via package manager
    pipx install ruff || pipx upgrade ruff
elif [[ $DISTRIBUTION == 'Darwin' ]]; then
    pipx install black || pipx upgrade black
    pipx install gitlint --include-deps || pipx upgrade gitlint
    pipx install sqlfluff || pipx upgrade sqlfluff
    pipx install ruff || pipx upgrade ruff
else
    PIPX="pipx install --include-deps"

    sudo pacman -S --noconfirm python-black ruff
    ${PIPX} gitlint
    ${PIPX} sqlfluff
fi
